{
    "componentChunkName": "component---node-modules-gatsby-theme-code-notes-src-templates-note-js",
    "path": "/ocp4-admintasksetcd-check-perf",
    "result": {"data":{"mdx":{"body":"var _excluded = [\"components\"];\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsxRuntime classic */\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Check etcd Performance\",\n  \"tags\": [\"Openshift 4\", \"Admin Tasks\", \"etcd\"],\n  \"emoji\": \"ðŸ§¹\",\n  \"link\": \"https://access.redhat.com/solutions/4985441\",\n  \"created\": \"2020-06-30T16:15:30.000Z\",\n  \"modified\": \"2020-12-20T17:09:49.000Z\"\n};\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, _excluded);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"p\", null, \"This command is useful if you need to check the performance of etcd.\"), mdx(\"h2\", {\n    \"id\": \"ocp-45\"\n  }, \"OCP 4.5+\"), mdx(\"p\", null, \"Starting with OpenShift 4.5 there is a new recommended way to test the performance of etcd. The output reports whether the disk is fast enough to host etcd by comparing the 99th percentile of the fsync metric captured from the run to see if it is less than 10ms.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Run the follow command from a master node.\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"podman run --volume /var/lib/etcd:/var/lib/etcd:Z quay.io/openshift-scale/etcd-perf\\n\")), mdx(\"h2\", {\n    \"id\": \"ocp-44\"\n  }, \"OCP 4.4+\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Run commands from a master node.\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"id=$(sudo crictl ps --name etcdctl | awk 'FNR==2{ print $1}') && sudo crictl exec -it $id /bin/bash\\n\\netcdctl check perf --load=\\\"m\\\"\\netcdctl check perf --load=\\\"l\\\"\\netcdctl check perf --load=\\\"xl\\\"\\n\")), mdx(\"h2\", {\n    \"id\": \"ocp-41-43\"\n  }, \"OCP 4.1-4.3\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Run commands from a master node.\")), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\",\n    \"className\": \"language-bash\"\n  }, \"id=$(sudo crictl ps --name etcd-member | awk 'FNR==2{ print $1}') && sudo crictl exec -it $id /bin/bash\\n\\nexport ETCDCTL_API=3 ETCDCTL_CACERT=/etc/ssl/etcd/ca.crt ETCDCTL_CERT=$(find /etc/ssl/ -name *peer*crt) ETCDCTL_KEY=$(find /etc/ssl/ -name *peer*key)\\n\\netcdctl check perf --load=\\\"m\\\"\\netcdctl check perf --load=\\\"l\\\"\\netcdctl check perf --load=\\\"xl\\\"\\n\")), mdx(\"p\", null, \"Example output:\"), mdx(\"pre\", null, mdx(\"code\", {\n    parentName: \"pre\"\n  }, \"$ etcdctl check perf --load=\\\"m\\\"\\n 60 / 60 Booooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo! 100.00%1m0s\\nPASS: Throughput is 974 writes/s\\nPASS: Slowest request took 0.468174s\\nPASS: Stddev is 0.028241s\\nPASS\\n\\n$ etcdctl check perf --load=\\\"l\\\"\\n 60 / 60 Booooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo! 100.00%1m0s\\nFAIL: Throughput too low: 6491 writes/s\\nPASS: Slowest request took 0.204441s\\nPASS: Stddev is 0.023631s\\nFAIL\\n\\n$ etcdctl check perf --load=\\\"xl\\\"\\n 60 / 60 Booooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooooo! 100.00%1m0s\\nFAIL: Throughput too low: 8451 writes/s\\nSlowest request took too long: 0.786915s\\nPASS: Stddev is 0.063215s\\nFAIL\\n\")));\n}\n;\nMDXContent.isMDXComponent = true;","frontmatter":{"title":"Check etcd Performance","tags":["Openshift 4","Admin Tasks","etcd"],"emoji":"ðŸ§¹","link":"https://access.redhat.com/solutions/4985441","modified":"December 20, 2020","modifiedTimestamp":"2020-12-20T17:09:49.000Z"},"references":[],"fields":{"slug":"/ocp4-admintasks/etcd-check-perf"},"tableOfContents":{"items":[{"url":"#ocp-45","title":"OCP 4.5+"},{"url":"#ocp-44","title":"OCP 4.4+"},{"url":"#ocp-41-43","title":"OCP 4.1-4.3"}]},"parent":{"relativePath":"ocp4-admintasks/etcd-check-perf.md"}}},"pageContext":{"id":"df5b4c03-6a3c-5b8c-9f64-4701e97c42e9","previous":{"id":"af7dee91-f771-5e93-baba-90e4de30d649","frontmatter":{"title":"Display etcd member table","tags":["Openshift 4","Admin Tasks","etcd"]},"fields":{"slug":"/ocp4-admintasks/etcd-member-table"}},"next":{"id":"e9b5bb02-3971-510b-9898-edf6dfc36ad6","frontmatter":{"title":"Create an Infra node for OCP4","tags":["Openshift 4","Admin Tasks","etcd"]},"fields":{"slug":"/ocp4-admintasks/create-infra-node"}},"hasUntagged":false,"basePath":"/","tags":[{"tag":"API","totalCount":1,"slug":"/api","path":"/tag/api"},{"tag":"Admin Tasks","totalCount":18,"slug":"/admin-tasks","path":"/tag/admin-tasks"},{"tag":"Auth","totalCount":1,"slug":"/auth","path":"/tag/auth"},{"tag":"Blog Posts","totalCount":1,"slug":"/blog-posts","path":"/tag/blog-posts"},{"tag":"CSRs","totalCount":1,"slug":"/cs-rs","path":"/tag/cs-rs"},{"tag":"Capacity","totalCount":5,"slug":"/capacity","path":"/tag/capacity"},{"tag":"Certificates","totalCount":3,"slug":"/certificates","path":"/tag/certificates"},{"tag":"Cleanup","totalCount":1,"slug":"/cleanup","path":"/tag/cleanup"},{"tag":"Configuration","totalCount":10,"slug":"/configuration","path":"/tag/configuration"},{"tag":"DNS","totalCount":1,"slug":"/dns","path":"/tag/dns"},{"tag":"Deployments","totalCount":1,"slug":"/deployments","path":"/tag/deployments"},{"tag":"Disconnected","totalCount":2,"slug":"/disconnected","path":"/tag/disconnected"},{"tag":"Ignition","totalCount":1,"slug":"/ignition","path":"/tag/ignition"},{"tag":"Images","totalCount":5,"slug":"/images","path":"/tag/images"},{"tag":"Installation","totalCount":4,"slug":"/installation","path":"/tag/installation"},{"tag":"Logging","totalCount":1,"slug":"/logging","path":"/tag/logging"},{"tag":"Networking","totalCount":1,"slug":"/networking","path":"/tag/networking"},{"tag":"Openshift 4","totalCount":54,"slug":"/openshift-4","path":"/tag/openshift-4"},{"tag":"Quota","totalCount":1,"slug":"/quota","path":"/tag/quota"},{"tag":"RHCOS","totalCount":3,"slug":"/rhcos","path":"/tag/rhcos"},{"tag":"Registry","totalCount":3,"slug":"/registry","path":"/tag/registry"},{"tag":"SDN","totalCount":1,"slug":"/sdn","path":"/tag/sdn"},{"tag":"Secrets","totalCount":3,"slug":"/secrets","path":"/tag/secrets"},{"tag":"Skopeo","totalCount":1,"slug":"/skopeo","path":"/tag/skopeo"},{"tag":"Terraform","totalCount":1,"slug":"/terraform","path":"/tag/terraform"},{"tag":"Tools","totalCount":1,"slug":"/tools","path":"/tag/tools"},{"tag":"Troubleshooting","totalCount":12,"slug":"/troubleshooting","path":"/tag/troubleshooting"},{"tag":"Upgrade","totalCount":3,"slug":"/upgrade","path":"/tag/upgrade"},{"tag":"VMWare","totalCount":3,"slug":"/vm-ware","path":"/tag/vm-ware"},{"tag":"etcd","totalCount":3,"slug":"/etcd","path":"/tag/etcd"},{"tag":"oc","totalCount":8,"slug":"/oc","path":"/tag/oc"},{"tag":"tcpdump","totalCount":1,"slug":"/tcpdump","path":"/tag/tcpdump"}]}},
    "staticQueryHashes": ["1308211557","2744905544","467212769"]}